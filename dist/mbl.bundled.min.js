(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.mbl = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var imgload=require("imgload"),xtend=require("xtend"),sanitize=require("sanitize-elements"),Emitter=require("tiny-emitter");module.exports=function(t,e){var n=new Emitter,o=xtend({sourceAttr:"data-src",sequential:!1,mode:"src",success:function(t){},error:function(t){},begin:function(){},complete:function(){}},e),i={total:0,count:0},r=function(){return(t=sanitize(t,!0))?(i.total=t.length,u(),this):void console.warn("no images here!")},u=function(){f(),i.total<=0?d():o.sequential?a():c()},c=function(){for(var t=0;t<i.total;t++)s(t)},a=function(){s(0)},s=function(e){if(e<i.total){var n=t[e],r=n.getAttribute(o.sourceAttr),u=imgload(r);u.on("error",function(){m(n)}).on("load",function(){var t=n.getAttribute("data-mbl-mode")||o.mode;"load"!==t&&("background"===t?(n.style.backgroundImage="url('"+r+"')",n.setAttribute("data-mbl-complete","")):(n.setAttribute("src",r),n.setAttribute("data-mbl-complete",""))),l(n)}).on("always",function(){o.sequential&&s(e+1),i.count++,i.count>=i.total&&d()}).start()}},l=function(t){o.success(t),n.emit("success",{element:t})},m=function(t){o.error(t),n.emit("error",{element:t})},f=function(){o.begin(),n.emit("begin")},d=function(){o.complete(),n.emit("complete")};return{start:r,on:function(t,e){return n.on(t,e),this}}};
},{"imgload":3,"sanitize-elements":7,"tiny-emitter":8,"xtend":9}],2:[function(require,module,exports){
module.exports=function(e,t){var n=document;if(n.createEvent){var v=document.createEvent("CustomEvent");v.initCustomEvent(t,!1,!1,{}),e.dispatchEvent(v)}else{var v=n.createEventObject();e.fireEvent("on"+t,v)}};

},{}],3:[function(require,module,exports){
var trigger=require("etrig"),Emitter=require("tiny-emitter");module.exports=function(r){function e(){var e=new Image;return e.addEventListener("load",function(){t.emit("load",{src:r}).emit("always",{src:r,result:"load"})}),e.addEventListener("error",function(){t.emit("error",{src:r}).emit("always",{src:r,result:"error"})}),e.src=r,e.complete&&trigger(e,"load"),this}var t=new Emitter;return{start:e,on:function(r,e){return t.once(r,e),this}}};

},{"etrig":2,"tiny-emitter":8}],4:[function(require,module,exports){
var isArray=Array.isArray,str=Object.prototype.toString;module.exports=isArray||function(r){return!!r&&"[object Array]"==str.call(r)};

},{}],5:[function(require,module,exports){
!function(e){function t(e){return e&&1===e.nodeType&&e&&"object"==typeof e&&Object.prototype.toString.call(e).indexOf("Element")>-1}"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=t),exports.isElement=t):"function"==typeof define&&define.amd?define([],function(){return t}):e.isElement=t}(this);

},{}],6:[function(require,module,exports){
"use strict";module.exports=function(t){return"object"==typeof t&&null!==t};

},{}],7:[function(require,module,exports){
var isElement=require("is-element"),isObject=require("is-object"),isArray=require("is-array");module.exports=function(e,i){if(void 0===e||!isObject(e)||e===window||e===document)return!1;var r=[];if(isElement(e)){if(!i)return e;r.push(e)}else isArray(e)?e.forEach(function(e){isElement(e)&&r.push(e)}):isObject(e)&&Object.keys(e).forEach(function(i){isElement(e[i])&&r.push(e[i])});return!!r.length&&r};

},{"is-array":4,"is-element":5,"is-object":6}],8:[function(require,module,exports){
function E(){}E.prototype={on:function(t,n,e){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:n,ctx:e}),this},once:function(t,n,e){function i(){f.off(t,i),n.apply(e,arguments)}var f=this;return i._=n,this.on(t,i,e)},emit:function(t){var n=[].slice.call(arguments,1),e=((this.e||(this.e={}))[t]||[]).slice(),i=0,f=e.length;for(i;i<f;i++)e[i].fn.apply(e[i].ctx,n);return this},off:function(t,n){var e=this.e||(this.e={}),i=e[t],f=[];if(i&&n)for(var o=0,r=i.length;o<r;o++)i[o].fn!==n&&i[o].fn._!==n&&f.push(i[o]);return f.length?e[t]=f:delete e[t],this}},module.exports=E;

},{}],9:[function(require,module,exports){
function extend(){for(var r={},e=0;e<arguments.length;e++){var t=arguments[e];for(var n in t)hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r}module.exports=extend;var hasOwnProperty=Object.prototype.hasOwnProperty;

},{}]},{},[1])(1)
});